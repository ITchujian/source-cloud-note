{% extends 'base.html' %}
{% load static %}

{% block title %}源笔记 - 用户注册{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/user/register-style.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h2>源笔记&注册系统</h2>
    {% if register_status %}
    <div id="popup">
        <p>{{ register_status }}</p>
    </div>
    {% endif %}
    <form method="post">
        {% csrf_token %}

        <div class="input_title">
            <label for="username">用户名</label>
            {% if username_status %}
            <p class="error-message"><span class="error-icon"></span>{{ username_status }}</p>
            {% endif %}
        </div>
        <input type="text" id="username" name="username" pattern="[a-zA-Z0-9_]+" title="只能输入英文、数字和下划线" value="{{ username }}" autocomplete="username">

        <div class="input_title">
            <label for="password1">密码</label>
            {% if password1_status %}
            <p class="error-message"><span class="error-icon"></span>{{ password1_status }}</p>
            {% endif %}
        </div>
        <input type="password" id="password1" name="password1">

        <div class="input_title">
            <label for="password2">确认密码</label>
            {% if password2_status %}
            <p class="error-message"><span class="error-icon"></span>{{ password2_status }}</p>
            {% endif %}
        </div>
        <input type="password" id="password2" name="password2">

        <div class="input_title">
            <button class="login" id="to-login-btn" type="button">前往登录</button>
            <button type="submit">注册</button>
        </div>

    </form>
</div>
{% endblock %}
{% block scripts %}
<script src="{% static 'js/register-main.js' %}"></script>

<script>
    registerParams['api-to-login'] = '{% url "user:login" %}';
</script>
{% endblock %}